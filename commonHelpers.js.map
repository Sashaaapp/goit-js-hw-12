{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Описаний у документації\nimport axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const loaderContainer = document.getElementById('loader-container');\n  const searchForm = document.getElementById('searchForm');\n  const searchInput = document.getElementById('searchInput');\n  const gallery = document.getElementById('gallery');\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  const endMessage = document.getElementById('endMessage');\n\n  const apiKey = '41934305-8f787e974a2ef1238ff7fef77';\n  let currentPage = 1;\n  let totalHits = 0;\n  let currentSearchTerm = '';\n\n  hideLoader(loaderContainer);\n  loadMoreButton.style.display = 'none';\n  endMessage.style.display = 'none';\n\n  searchForm.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    currentPage = 1;\n    loadMoreButton.style.display = 'none';\n    hideEndMessage();\n\n    const searchTerm = searchInput.value.trim();\n    if (searchTerm === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search term',\n      });\n      hideLoader(loaderContainer);\n      return;\n    }\n    currentSearchTerm = searchTerm;\n      clearGallery();\n    showLoader(loaderContainer);\n    try {\n      await fetchData(currentSearchTerm);\n    } finally {\n      hideLoader(loaderContainer);\n    }\n  });\n\n  async function fetchData(searchTerm) {\n    try {\n      showLoadingText(); \n      \n      const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n          key: apiKey,\n          q: searchTerm,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page: 40,\n          page: currentPage,\n        },\n      });\n\n      totalHits = response.data.totalHits;\n\n      if (response.data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message: 'No images found for the provided search term',\n        });\n      } else {\n        displayImages(response.data.hits);\n\n        if (currentPage * 40 >= totalHits) {\n          loadMoreButton.style.display = 'none';\n          showEndMessage();\n        } else {\n          loadMoreButton.style.display = 'block';\n        }\n\n        if (currentPage > 1) {\n          const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        }\n      }\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.',\n      });\n    } finally {\n      hideLoadingText(); \n    }\n  }\n  function clearGallery() {\n    gallery.innerHTML = '';\n  }\n\n  function showEndMessage() {\n    endMessage.style.display = 'block';\n  }\n\n  function hideEndMessage() {\n    endMessage.style.display = 'none';\n  }\n\n  loadMoreButton.addEventListener('click', async function () {\n    currentPage++;\n    hideLoadMoreButton(); \n    showLoadingText(); \n    await fetchData(currentSearchTerm);\n    hideLoadingText(); \n  });\n  function hideLoadMoreButton() {\n    loadMoreButton.style.display = 'none';\n  }\n\n  function showLoadMoreButton() {\n    loadMoreButton.style.display = 'block';\n  }\n\n  function showLoader(loaderContainer) {\n    if (loaderContainer) {\n      loaderContainer.style.display = 'block';\n    }\n  }\n\n  function hideLoader(loaderContainer) {\n    if (loaderContainer) {\n      loaderContainer.style.display = 'none';\n    }\n  }\n\n  function showLoadingText() {\n    const loadingText = document.createElement('div');\n    loadingText.textContent = 'Loading images, please wait...';\n    loadingText.classList.add('loading-text');\n\n    loadMoreButton.parentNode.insertBefore(loadingText, loadMoreButton.nextSibling);\n  }\n\n  function hideLoadingText() {\n    const loadingText = document.querySelector('.loading-text');\n    if (loadingText) {\n      loadingText.remove();\n    }\n  }\n\n  function displayImages(images) {\n    const galleryHTML = images\n      .map(image => {\n        return `\n          <div class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"Likes: ${image.likes}, Views: ${image.views}, Comments: ${image.comments}, Downloads: ${image.downloads}\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-src=\"${image.largeImageURL}\" data-caption=\"Likes: ${image.likes}, Views: ${image.views}, Comments: ${image.comments}, Downloads: ${image.downloads}\">\n            </a>\n            <div class=\"image-stats\">\n              <div class=\"stat-item\">\n                <p class=\"stat-label\">Likes:</p>\n                <p class=\"stat-value\">${image.likes}</p>\n              </div>\n              <div class=\"stat-item\">\n                <p class=\"stat-label\">Views:</p>\n                <p class=\"stat-value\">${image.views}</p>\n              </div>\n              <div class=\"stat-item\">\n                <p class=\"stat-label\">Comments:</p>\n                <p class=\"stat-value\">${image.comments}</p>\n              </div>\n              <div class=\"stat-item\">\n                <p class=\"stat-label\">Downloads:</p>\n                <p class=\"stat-value\">${image.downloads}</p>\n              </div>\n            </div>\n          </div>\n        `;\n      })\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryHTML);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    lightbox.refresh();\n  }\n});\n"],"names":["loaderContainer","searchForm","searchInput","gallery","loadMoreButton","endMessage","apiKey","currentPage","totalHits","currentSearchTerm","hideLoader","e","hideEndMessage","searchTerm","iziToast","clearGallery","showLoader","fetchData","showLoadingText","response","axios","displayImages","showEndMessage","cardHeight","hideLoadingText","hideLoadMoreButton","loadingText","images","galleryHTML","image","SimpleLightbox"],"mappings":"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"}